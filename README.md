# ðŸ“š Node.js-study
ì°¸ê³  - Node.js êµê³¼ì„œ, searching etc...

# Event Driven 
`ì´ë²¤íŠ¸ ê¸°ë°˜`ì´ëž€ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ ë¯¸ë¦¬ ì§€ì •í•´ë‘” ìž‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì¸ë°, ì´ ì´ë²¤íŠ¸ ê¸°ë°˜ì€ ë…¸ë“œì˜ íŠ¹ì„± ì¤‘ í•˜ë‚˜ì´ë‹¤.

ì´ë²¤íŠ¸ ê¸°ë°˜ ì‹œìŠ¤í…œì—ì„œëŠ” `íŠ¹ì • ì´ë²¤íŠ¸` ê°€ `ë°œìƒ`í•  ë•Œ, ë¬´ì—‡ì„ í•  ì§€ ë¯¸ë¦¬ ë“±ë¡í•´ë‘ì–´ì•¼ í•œë‹¤. 
> ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì— ì½œë°± í•¨ìˆ˜ë¥¼ ë“±ë¡í•œë‹¤.

## ì´ë²¤íŠ¸ ë£¨í”„
- ì´ë²¤íŠ¸ ë°œìƒ ì‹œ í˜¸ì¶œí•  ì½œë°±í•¨ìˆ˜ë¥¼ ê´€ë¦¬í•˜ê³ , í˜¸ì¶œëœ ì½œë°± í•¨ìˆ˜ì˜ ì‹¤í–‰ ìˆœì„œë¥¼ ê²°ì •
- ë…¸ë“œê°€ ì¢…ë£Œë  ë•Œ ê¹Œì§€ ì´ë²¤íŠ¸ ì²˜ë¦¬ë¥¼ ìœ„í•œ ìž‘ì—…ì„ ë°˜ë³µ -> loopë¼ê³  ë¶€ë¦„

## ë°±ê·¸ë¼ìš´ë“œ
- `setTimeout` ê°™ì€ íƒ€ì´ë¨¸ë‚˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ëŒ€ê¸°í•˜ëŠ” ê³³ì´ë‹¤.
- ì—¬ëŸ¬ ìž‘ì—…ì´ ë™ì‹œì— ì‹¤í–‰ ê°€ëŠ¥

## íƒœìŠ¤í¬ í
- ì´ë²¤íŠ¸ ë°œìƒ í›„, `ë°±ê·¸ë¼ìš´ë“œ`ì—ì„œ `íƒœìŠ¤í¬ í`ë¡œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ë³´ë‚¸ë‹¤. 

# ë…¼ ë¸”ë¡œí‚¹ I/O 
ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ ìž˜ í™œìš©í•˜ë©´ ì˜¤ëž˜ ê±¸ë¦¬ëŠ” ìž‘ì—…ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìžˆë‹¤.

ìž‘ì—…ì—ëŠ” ë‘ ê°€ì§€ ì¢…ë¥˜ê°€ ìžˆëŠ”ë°, ë™ì‹œì— ì‹¤í–‰ê°€ëŠ¥í•œ ìž‘ì—…ê³¼ ê·¸ë ‡ì§€ ì•Šì€ ìž‘ì—…ì´ë‹¤.
ê¸°ë³¸ì ìœ¼ë¡œ ìžë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œëŠ” ë™ì‹œì— ì‹¤í–‰í•  ìˆ˜ ì—†ì§€ë§Œ, I/O ìž‘ì—…ì€ ê°€ëŠ¥í•˜ë‹¤.

## ë…¼ë¸”ë¡œí‚¹
> ì´ì „ ìž‘ì—…ì´ ì™„ë£Œë  ë•Œ ê¹Œì§€ ëŒ€ê¸°í•˜ì§€ ì•Šê³  ë‹¤ìŒ ìž‘ì—…ì„ ìˆ˜í–‰
- `ë…¼ ë¸”ë¡œí‚¹`ê³¼ `ë™ì‹œ` ëŠ” ê°™ì€ ì˜ë¯¸ê°€ ì•„ë‹ˆë‹¤.
## ë¸”ë¡œí‚¹
> ì´ì „ ìž‘ì—…ì´ ëë‚˜ì•¼ë§Œ ë‹¤ìŒ ìž‘ì—… ìˆ˜í–‰ 

# í”„ë¡œë¯¸ìŠ¤
ìžë°”ìŠ¤í¬ë¦½íŠ¸ì™€ ë…¸ë“œì—ì„œëŠ” ì£¼ë¡œ ë¹„ë™ê¸°ë¥¼ ì ‘í•˜ê³ , íŠ¹ížˆ `ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ` ë¥¼ ì‚¬ìš©í•  ë•Œ `ì½œë°± í•¨ìˆ˜` ë¥¼ ìžì£¼ ì‚¬ìš©í•œë‹¤. 

ES2015 ë¶€í„°ëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ì™€ ë…¸ë“œì˜ APIë“¤ì´ `ì½œë°±` ëŒ€ì‹  `Promise` ê¸°ë°˜ìœ¼ë¡œ ìž¬êµ¬ì„±ë˜ì—ˆëŠ”ë°, ì´ëŠ” ì½œë°± ì§€ì˜¥ì„ ê·¹ë³µí–ˆë‹¤ëŠ” í‰ê°€ë¥¼ ë°›ëŠ”ë‹¤.

## ê·œì¹™
``` javascript
const condition = true;
const promise = new Promise((resolve, reject) => {
    if (condition) {
        resolve('ì„±ê³µ!');
    } else {
        reject('ì‹¤íŒ¨!');
    }
});

// ë‹¤ë¥¸ ì½”ë“œ ë“¤ì–´ê°ˆ ìˆ˜ ìžˆìŒ

promise
  .then((message) => {
    // ì„±ê³µ(resolve)í•œ ê²½ìš° ì‹¤í–‰ 
    console.log(message);
  })
  .catch((error) => {
    // ì‹¤íŒ¨(reject) í•œ ê²½ìš° ì‹¤í–‰ 
    console.error(error);
  })
  .finally(() => { // ëë‚˜ê³  ë¬´ì¡°ê±´ ì‹¤í–‰
  console.log('ë¬´ì¡°ê±´!');
  });
```

1. `new Promise`ë¥¼ í†µí•´ í”„ë¡œë¯¸ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìžˆìœ¼ë©°, ê·¸ ë‚´ë¶€ì— `resolve`ì™€ `reject`ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ê°–ëŠ” ì½œë°±í•¨ìˆ˜ë¥¼ ìƒì„±
2. 1ê³¼ ê°™ì´ ë§Œë“  `promise` ë³€ìˆ˜ì— `then`ê³¼ `catch` ë©”ì„œë“œë¥¼ ë¶™ì¼ ìˆ˜ ìžˆë‹¤.
   1. `resolve`ê°€ í˜¸ì¶œë˜ë©´ -> `then` ì‹¤í–‰
   2. `reject`ê°€ í˜¸ì¶œë˜ë©´ -> `catch` ì‹¤í–‰
   3. `finally`ëŠ” ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ì‹¤í–‰

## `Promise.all`
í”„ë¡œë¯¸ìŠ¤ë¥¼ ì—¬ëŸ¬ ê°œ í•œ ë²ˆì— ì‹¤í–‰ 
``` javascript
const promise1 = Promise.resolve('ì„±ê³µ1');
const promise2 = Promise.resolve('ì„±ê³µ2');

Promise.all([promise1, promise2])
    .then(result => {
        console.log(result); // ['ì„±ê³µ1', 'ì„±ê³µ2'];
    })
    .catch((error) => {
        console.error(error);
    });
```

`Promise.resolve`ëŠ” ì¦‰ì‹œ resolve í•˜ëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ë§Œë“ ë‹¤. (rejectë„ ì¡´ìž¬) 

í”„ë¡œë¯¸ìŠ¤ê°€ ì—¬ëŸ¬ê°œ ìžˆì„ ë•Œ, `Promise.all`ì— ë„£ìœ¼ë©´ ëª¨ë‘ resolveë  ë•Œ ê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ thenìœ¼ë¡œ ë„˜ì–´ê°€ê³ , Promise ì¤‘ í•˜ë‚˜ë¼ë„ reject ë˜ë©´ catchë¡œ ê°„ë‹¤.

# async/await 
ES2017 ë¶€í„° ì¶”ê°€ë˜ì—ˆê³ , ë…¸ë“œì²˜ëŸ¼ ë¹„ë™ê¸° ìœ„ì£¼ í”„ë¡œê·¸ëž˜ë°ì„ í•´ì•¼í•  ë•Œ ë„ì›€ì´ ëœë‹¤. 

## ì´ì „
``` javascript
function findAndSaveUser(Users) {
    Users.findOne({})
        .then((users) => {
            user.name = 'me';
            return user.save();
        })
        .then((user) => {
            return Users.findOne({ gender : 'm'});
        })
        .then((user) => {
            // ... 
        })
        .catch(err => {
            console.error(err);
        });
}
``` 

## ì´í›„ 
``` javascript
async function findAndSaveUser(Users) {
    let user = await Users.findOne({});
    user.name = 'me';
    user = await user.save();
    user = await User.findOne({ gender : 'm' });
    // ... 
}
``` 
`await Users.findOne({});` ëŠ” resolve ë  ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦° ë‹¤ìŒì— userë¥¼ ì´ˆê¸°í™” í•œë‹¤. 

for ë¬¸ê³¼ `async/await` ì„ ê°™ì´ ì¨ì„œ í”„ë¡œë¯¸ìŠ¤ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ë„ ìžˆë‹¤. (since ES2018)

``` javascript
const promise1 = Promise.resolve('ì„±ê³µ1');
const promise2 = Promise.resolve('ì„±ê³µ2');

(async () => {
    for await (promise of [promise1, promise2]) {
        console.log(promise);
    }
})();